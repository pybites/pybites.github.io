<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Proper error handling can make your Python code simpler, more readable, and idiomatic. Here are 7 tips to help you. 1. Explicit is better than implicit Exceptions in Python have the following...">
        <meta name="keywords" content="anti-patterns, best practices, EAFP, exception handling, exceptions, pitfalls">
        <link rel="icon" href="https://pybit.es/favicon.ico">

        <title>7 Tips to Improve Your Error Handling in Python - PyBites</title>

        <!-- Stylesheets -->
        <link href="https://pybit.es/theme/css/all.min.css" rel="stylesheet">
        <link href="https://pybit.es/theme/css/style.css" rel="stylesheet">
        <!-- /Stylesheets -->

        <!-- RSS Feeds -->
        <link href="https://pybit.es/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyBites Full Atom Feed" />
        <link href="https://pybit.es/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyBites Full RSS Feed" />
        <link href="https://pybit.es/feeds/concepts.rss.xml" type="application/rss+xml" rel="alternate" title="PyBites Categories RSS Feed" />
        <!-- /RSS Feeds -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

          <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5859c6a67eb6254d" async="async"></script>

        <!-- Google Analytics -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-89294245-1', 'auto');
          ga('send', 'pageview');
        </script>
        <!-- /Google Analytics -->



    <!-- mailchimp subscribe -->
    <script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us14.list-manage.com","uuid":"822043293f280259d4b8d2a3e","lid":"ac7e2eb9ef","uniqueMethods":true}) })</script>
    <!-- end mailchimp subscribe -->

    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '204929054292880');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=204929054292880&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Facebook Pixel Code -->

    </head>

    <body>

        <!-- Header -->
    <div class="header-container gradient">

            <!-- Static navbar -->
            <div class="container">
                <div class="header-nav">
                    <div class="header-logo">
                        <a class="pull-left" href="https://pybit.es/"><img class="mr20" src="https://pybit.es/images/logo.png" alt="logo"></a>
                    </div>
                    <div class="nav pull-right">

                        <div class="dropdown">
                          <span>RESOURCES</span>
                          <div class="dropdown-content">
                                <a href="/archives"
                                >Articles</a>
                                <a href="/pages/friends"
                                >Friends List</a>
                                <a href="/pages/community"
                                >Community</a>
                                <a href="/category/challenges"
                                >Blog Challenges</a>
                                <a href="https://github.com/PyBites-Open-Source"
                                    target="_blank"
                                >Open Source</a>
                                <a href="https://www.udemy.com/course/python-flask-for-beginners/"
                                    target="_blank"
                                >Flask Intro Course</a>
                          </div>
                        </div>

                        <div class="dropdown">
                          <span>SERVICES</span>
                          <div class="dropdown-content">
                                <a href="/pages/newbie"
                                >Newbies</a>
                                <a href="https://codechalleng.es"
                                    target="_blank"
                                >Python Exercises</a>
                                <a href="/pages/schools"
                                >Schools</a>
                                <a href="/pages/enterprise"
                                >Enterprise</a>
                                <a href="/pages/recruiting"
                                >Recruiter</a>
                                <a href="/pages/100days"
                                >100 Days Of Code</a>
                                <a href="/pages/apply"
                                >Coaching</a>
                          </div>
                        </div>

                        <div class="dropdown">
                          <a href="https://pybit.es/pages/apply" id="workshopButton">Python Career</a>
                        </div>

                    </div>
                </div>
            </div>
            <!-- /Static navbar -->

            <!-- Header -->
    <!-- Header -->
    <div class="container header-wrapper">
        <div class="row">
              <div class="col-lg-12">
                  <div class="header-content">
                      <h1 class="header-title">7 Tips to Improve Your Error Handling in Python</h1>
                      <p class="header-date"> <a href="https://pybit.es/author/bob.html">Bob</a>, Wed 06 May 2020,  <a href="https://pybit.es/category/concepts.html">Concepts</a></p>
                      <div class="header-underline"></div>
                      <div class="clearfix"></div>
                      <p class="pull-right header-tags">
                          <span class="glyphicon glyphicon-tags mr5" aria-hidden="true"></span>
<a href="https://pybit.es/tag/anti-patterns.html">anti-patterns</a>, <a href="https://pybit.es/tag/best-practices.html">best practices</a>, <a href="https://pybit.es/tag/eafp.html">EAFP</a>, <a href="https://pybit.es/tag/exception-handling.html">exception handling</a>, <a href="https://pybit.es/tag/exceptions.html">exceptions</a>, <a href="https://pybit.es/tag/pitfalls.html">pitfalls</a>                      </p>
                  </div>
              </div>
        </div>
    </div>
    <!-- /Header -->
            <!-- /Header -->

        </div>
        <!-- /Header -->


        <!-- Content -->
    <div class="container content">
        <p>Proper error handling can make your Python code simpler, more readable, and idiomatic. Here are 7 tips to help you.</p>
<h2>1. Explicit is better than implicit</h2>
<p>Exceptions in Python have the following clauses:</p>
<ul>
<li>
<p>Required:</p>
<div class="highlight"><pre><span></span><span class="n">try</span><span class="p">:</span>
    <span class="p">...</span>
<span class="k">except</span> <span class="p">...:</span>
    <span class="o">#</span> <span class="n">handle</span> <span class="k">exception</span>
<span class="k">except</span> <span class="p">...:</span>
    <span class="o">#</span> <span class="n">handle</span> <span class="n">another</span> <span class="k">exception</span>
<span class="p">...</span>
</pre></div>


</li>
<li>
<p>And optionally after the except clauses:</p>
<div class="highlight"><pre><span></span>...
<span class="k">else</span>:
    # <span class="nv">code</span> <span class="k">if</span> <span class="nv">no</span> <span class="nv">exception</span> <span class="nv">was</span> <span class="nv">hit</span>
<span class="nv">finally</span>:
    # <span class="nv">cleanup</span> <span class="nv">code</span>, <span class="nv">always</span> <span class="nv">executes</span>
</pre></div>


</li>
</ul>
<p>So <code>try</code> + <code>except</code> is all it takes, but with freedom comes responsibility. A bare <code>try except:</code> might cause you headaches debugging. So name your exceptions specificly.</p>
<p>Note that order matters here. Address more specific exceptions before more general ones. If you put <code>Exception</code> before <code>ZeroDivisionError</code> for example, it will become a catch-all.</p>
<h2>2. Flat is better than nested</h2>
<p>Raising an exception (using <code>raise</code>) is a great way to avoid unnecessary indenting in your code.</p>
<p>Take one of our Bites. Right off the bat we raise an exception if the input doesn't make sense:</p>
<div class="highlight"><pre><span></span><span class="nv">def</span> <span class="nv">pretty_date</span><span class="ss">(</span><span class="nv">date</span><span class="ss">)</span>:
    <span class="s2">&quot;&quot;&quot;</span><span class="s">Receives a datetime object and converts/returns a readable string</span><span class="s2">&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nv">not</span> <span class="nv">isinstance</span><span class="ss">(</span><span class="nv">date</span>, <span class="nv">datetime</span><span class="ss">)</span> <span class="nv">or</span> <span class="nv">date</span> <span class="o">&gt;</span> <span class="nv">NOW</span>:
        <span class="nv">raise</span> <span class="nv">ValueError</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">expecting past date</span><span class="s1">&#39;</span><span class="ss">)</span>
</pre></div>


<h2>3. Write custom exceptions</h2>
<p>This is literally all it takes:</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="n">NoInternetConnection</span>(<span class="nb">Exception</span>):
    <span class="s">&quot;&quot;&quot;Exception raised when there is no internet&quot;&quot;&quot;</span>
</pre></div>


<p>(We have always used <code>pass</code> here, but <a href="http://www.amazon.com/dp/B06Y4DVSBM/?tag=pyb0f-20">Python in a Nutshell</a>, actually suggests using a docstring instead.)</p>
<p>The advantage: it's like a <em>contract</em> with the caller of your function (<em>this is how we gonna play the game</em>).</p>
<p>It can increase the readability of your code as your module has more specific (granular) expressions as compared to the standard library ones.</p>
<p>You could even build up exception class hierarchies and namespace them by using a dedicated module <a href="https://github.com/psf/requests/blob/master/requests/exceptions.py">like the <code>requests</code> library does</a>.</p>
<p>When to do this? <a href="https://stackoverflow.com/a/43772787">Here</a> is a good answer:</p>
<blockquote>
<p>Generally, the only times you should be defining your own exceptions are when you have a specific case where raising a custom exception would be more appropriate than raising a existing Python exception.</p>
</blockquote>
<h2>4. Keep your try/except blocks narrow</h2>
<p>Because handling too many exceptions is a red flag.</p>
<p>Reducing the amount of code in your <code>try</code> block limits this temptation, which reduces the amount of error handling code you'll need.</p>
<h2>5. Actually use them</h2>
<p>Instead of excessive condition checking (aka <em>look before you leap</em>), it's <a href="https://docs.python.org/3.4/glossary.html"><em>easier to ask for forgiveness than permission</em> (EAFP)</a>.</p>
<p>As we showed in <a href="https://pybit.es/error_handling.html">our previous exception handling article</a> instead of checking:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="nv">os</span>.<span class="nv">path</span>.<span class="nv">exists</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">file.txt</span><span class="s2">&quot;</span><span class="ss">)</span>:
    ...
</pre></div>


<p>It's more idiomatic (<em>pythonic</em>) to just <em>try</em> things and catch the corresponding exception(s):</p>
<div class="highlight"><pre><span></span><span class="nv">try</span>:
    # <span class="nv">assume</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">is</span> <span class="nv">there</span>
    <span class="nv">os</span>.<span class="k">unlink</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">file.txt</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="nv">except</span> <span class="nv">OSError</span>:
    # <span class="k">if</span> <span class="nv">not</span>, <span class="nv">handle</span> <span class="nv">the</span> <span class="nv">exception</span>
</pre></div>


<p>Here is another good example and a bit more about the advantage of EAFP: <a href="https://devblogs.microsoft.com/python/idiomatic-python-eafp-versus-lbyl/">Idiomatic Python: EAFP versus LBYL</a></p>
<h2>6. Verbose logging</h2>
<p>Be verbose in your logging. As stated <a href="https://stackoverflow.com/a/5191885">here</a> can use <a href="https://docs.python.org/3/library/logging.html#logging.Logger.exception"><code>logger.exception</code></a> to log the stack trace alongside the error message.</p>
<h2>7. Rely on tools (remote environments)</h2>
<p>We can have perfect exception handling, but sometimes something slips through the cracks. You can use a tool like <a href="https://sentry.io/welcome/">Sentry</a> to send you an email when a user hits an unexpected error and doesn't tell you about it. Not only will you know right away, you will also get the full stacktrace which greatly helps fixing the issue.</p>
<hr>
<p>I hope this helps. What have you learned dealing with exceptions in Python? Share you insights in the comments below.</p>
<p>Keep Calm and Code in Python!</p>
<p>-- Bob</p>


    <div class="comments">
        <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_shortname = 'http-pybit-es';
                var disqus_identifier = 'pythonic-exceptions.html';
                var disqus_url = 'https://pybit.es/pythonic-exceptions.html';
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>
        
    </div>
        <!-- /Content --> 

        <!-- Footer -->
        <div class="footer gradient-2">
            <div class="container footer-container ">
                <div class="row">
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Sitemap</div>
                        <ul class="list-unstyled">
                            <li><a href="https://pybit.es/pages/guests.html">Authors</a></li>
                            <li><a href="https://pybit.es/pages/community.html">Community</a></li>
                            <li><a href="https://pybit.es/pages/100days.html">100 Days Of Code</a></li>
                            <li><a href="https://pybit.es/pages/search.html">Search</a></li>
                            <li><a href="https://pybit.es/pages/privacy-policy.html">Privacy Policy</a></li>
                              <li><a href="https://pybit.es/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">Atom Feed</a></li>
                              <li><a href="https://pybit.es/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">RSS Feed</a></li>
                            <li><a href="mailto:support@pybit.es" title="Contact us by email">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    </div>
                    <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                        <div class="footer-title">Reach Out</div>
                        <ul class="list-unstyled">
                            <li><a href="mailto:support@pybit.es" target="_blank">Email</a></li>
                            <li><a href="https://twitter.com/pybites" target="_blank">Twitter</a></li>
                            <li><a href="https://facebook.com/pybites" target="_blank">Facebook</a></li>
                            <li><a href="https://github.com/pybites" target="_blank">Github</a></li>
                            <li><a href="https://github.com/PyBites-Open-Source" target="_blank">Open Source</a></li>
                            <li><a href="https://www.youtube.com/channel/UCBn-uKDGsRBfcB0lQeOB_gA" target="_blank">YouTube</a></li>
                        </ul>
                    </div> 
                    <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                        <p class="pull-right text-right">
                            <small><em>Proudly powered by <a href="http://docs.getpelican.com/" target="_blank">pelican</a></em></small><br/>
                            <small><em>Theme and code by <a href="https://github.com/molivier" target="_blank">molivier</a></em></small><br/>
                            <small>&copy; PyBites 2016+</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Footer -->
    </body>
</html>